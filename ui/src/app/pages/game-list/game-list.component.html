<app-breadcrumb></app-breadcrumb>

<h1>Games</h1>

<div class="actions">
    <button
        mat-flat-button
        color="primary"
        [routerLink]="['/admin/competitions', competitionId, 'seasons', seasonId, 'games', 'create']">
        Create Game
    </button>
</div>

<table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef>Date</th>
        <td mat-cell *matCellDef="let game">{{ game.date | date: 'dd/MM/yyyy HH:mm' }}</td>
    </ng-container>

    <ng-container matColumnDef="homeTeam">
        <th mat-header-cell *matHeaderCellDef>Home Team</th>
        <td mat-cell *matCellDef="let game">{{ game.home_team_name }}</td>
    </ng-container>

    <ng-container matColumnDef="homeScore">
        <th mat-header-cell *matHeaderCellDef>Home Score</th>
        <td mat-cell *matCellDef="let game">{{ game.home_score }}</td>
    </ng-container>

    <ng-container matColumnDef="awayScore">
        <th mat-header-cell *matHeaderCellDef>Away Score</th>
        <td mat-cell *matCellDef="let game">{{ game.away_score }}</td>
    </ng-container>

    <ng-container matColumnDef="awayTeam">
        <th mat-header-cell *matHeaderCellDef>Away Team</th>
        <td mat-cell *matCellDef="let game">{{ game.away_team_name }}</td>
    </ng-container>

    <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let game">{{ game.status }}</td>
    </ng-container>

    <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let game">
            <button
                data-testid="edit-button"
                mat-icon-button
                [routerLink]="['/admin/competitions', competitionId, 'seasons', seasonId, 'games', game.id]">
                <mat-icon>edit</mat-icon>
            </button>
            <button data-testid="delete-button" mat-icon-button (click)="confirmDelete(game)">
                <mat-icon>delete</mat-icon>
            </button>
        </td>
    </ng-container>

    <tr
        mat-header-row
        *matHeaderRowDef="[
            'date',
            'homeTeam',
            'homeScore',
            'awayScore',
            'awayTeam',
            'status',
            'actions'
        ]"></tr>
    <tr
        mat-row
        *matRowDef="
            let row;
            columns: ['date', 'homeTeam', 'homeScore', 'awayScore', 'awayTeam', 'status', 'actions']
        "></tr>

    <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell text-center" colspan="7">No games found</td>
    </tr>
</table>
